<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mente Jovem - Quiz Emocional</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Quiz Emocional - Mente Jovem</h1>
        <p>ğŸ§¡ Este Ã© um espaÃ§o seguro. Responda com sinceridade. NÃ£o Ã© uma prova, nÃ£o tem certo ou errado. Isso nos ajuda a entender como vocÃª estÃ¡ se sentindo. âœ… Leva menos de 2 minutos.</p>
        <form id="quizForm">
            <div id="questions">
                <!-- As perguntas serÃ£o inseridas dinamicamente via JavaScript -->
            </div>
            <button type="submit">Enviar Respostas</button>
        </form>
        <div id="result" style="display: none;">
            <h2>Resultado</h2>
            <p id="resultText"></p>
            <p id="resultEmoji"></p>
            <button id="actionButton"></button>
            <button onclick="resetQuiz()">Refazer o Quiz</button>
        </div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
    <script src="script.js"></script>
    <script>
        const questions = [
            "VocÃª sente que estÃ¡ carregando algo pesado por dentro, mesmo sem saber explicar o motivo?",
            "JÃ¡ sentiu que ninguÃ©m entenderia se vocÃª contasse o que estÃ¡ passando?",
            "Tem dificuldade para dormir ou dormir demais nos Ãºltimos dias?",
            "VocÃª tem chorado ou se sentido muito triste sem saber por quÃª?",
            "Tem perdido o interesse em coisas que normalmente gosta de fazer?",
            "Tem sentido seu coraÃ§Ã£o acelerar ou ficar nervoso sem um motivo claro?",
            "JÃ¡ pensou em desaparecer ou que o mundo seria melhor sem vocÃª?",
            "VocÃª tem alguÃ©m com quem se sente seguro para conversar sobre seus sentimentos?",
            "EstÃ¡ se sentindo sozinho, mesmo estando entre outras pessoas?",
            "EstÃ¡ tudo bem de verdade com vocÃªâ€¦ ou vocÃª apenas diz que estÃ¡ para nÃ£o preocupar ninguÃ©m?"
        ];

        const quizForm = document.getElementById('quizForm');
        const questionsDiv = document.getElementById('questions');
        const resultDiv = document.getElementById('result');
        const resultText = document.getElementById('resultText');
        const resultEmoji = document.getElementById('resultEmoji');
        const actionButton = document.getElementById('actionButton');

        // Gera as perguntas dinamicamente
        questions.forEach((question, index) => {
            const questionDiv = document.createElement('div');
            questionDiv.innerHTML = `
                <p>${index + 1}. ${question}</p>
                <label><input type="radio" name="q${index}" value="1" required> ğŸ˜ƒ Nunca</label>
                <label><input type="radio" name="q${index}" value="2"> ğŸ˜ Raramente</label>
                <label><input type="radio" name="q${index}" value="3"> ğŸ˜¶ Ã€s vezes</label>
                <label><input type="radio" name="q${index}" value="4"> ğŸ˜Ÿ Frequentemente</label>
                <label><input type="radio" name="q${index}" value="5"> ğŸ˜¢ Quase sempre</label>
            `;
            questionsDiv.appendChild(questionDiv);
        });

        quizForm.addEventListener('submit', (e) => {
            e.preventDefault();
            let score = 0;
            let q7Score = 0;
            for (let i = 0; i < questions.length; i++) {
                const selected = document.querySelector(`input[name="q${i}"]:checked`);
                if (selected) {
                    const value = parseInt(selected.value);
                    score += value;
                    if (i === 6) q7Score = value; // Pergunta 7
                }
            }

            let result = '';
            let emoji = '';
            let action = '';

            if (q7Score >= 4) {
                result = 'VocÃª nÃ£o estÃ¡ sozinho. Seu sentimento importa e queremos conversar com vocÃª agora. Vamos cuidar disso juntos. â¤ï¸';
                emoji = 'ğŸ˜¢';
                action = `<a href="https://calendly.com/mente-jovem/terapeuta">Falar agora com alguÃ©m por vÃ­deo</a><br><p>Se vocÃª estiver em risco imediato, tambÃ©m pode buscar ajuda com um adulto de confianÃ§a ou ligar para o 188 (CVV).</p>`;
                saveResultToFirebase(score, 'Vermelho');
            } else if (score <= 20) {
                result = 'VocÃª estÃ¡ se saindo bem, e isso Ã© Ã³timo. Mas todo mundo precisa de apoio de vez em quando. VocÃª pode conversar com alguÃ©m ou explorar nosso conteÃºdo emocional gratuito. ğŸ’š';
                emoji = 'ğŸ˜ƒ';
                action = `<a href="chat.html">Quero conversar com um ouvinte</a>`;
                saveResultToFirebase(score, 'Verde');
            } else if (score <= 34) {
                result = 'Percebemos que talvez algo esteja pedindo atenÃ§Ã£o dentro de vocÃª. Isso nÃ£o significa que vocÃª estÃ¡ fraco, significa que vocÃª Ã© humano. ğŸ’›';
                emoji = 'ğŸ˜';
                action = `<a href="https://calendly.com/mente-jovem/profissional">Agendar conversa com um profissional</a>`;
                saveResultToFirebase(score, 'Amarelo');
            } else {
                result = 'VocÃª nÃ£o estÃ¡ sozinho. Seu sentimento importa e queremos conversar com vocÃª agora. Vamos cuidar disso juntos. â¤ï¸';
                emoji = 'ğŸ˜¢';
                action = `<a href="https://calendly.com/mente-jovem/terapeuta">Falar agora com alguÃ©m por vÃ­deo</a><br><p>Se vocÃª estiver em risco imediato, tambÃ©m pode buscar ajuda com um adulto de confianÃ§a ou ligar para o 188 (CVV).</p>`;
                saveResultToFirebase(score, 'Vermelho');
            }

            resultText.innerHTML = result;
            resultEmoji.innerHTML = emoji;
            actionButton.innerHTML = action;
            resultDiv.style.display = 'block';
            quizForm.style.display = 'none';
        });

        function resetQuiz() {
            quizForm.reset();
            resultDiv.style.display = 'none';
            quizForm.style.display = 'block';
        }
    </script>
</body>
</html>
